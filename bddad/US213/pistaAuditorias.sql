
DROP TABLE PISTA_AUDITORIA;
CREATE TABLE PISTA_AUDITORIA(
    COD_AUDITORIA INTEGER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    USER_ID VARCHAR(10) DEFAULT USER,
    TIPO_ALTERACAO VARCHAR(10) NOT NULL,
    ALTERACAO VARCHAR(10) NOT NULL;
    DATA_HORA DATE DEFAULT SYSDATE,
    constraint PK_PISTA_AUDITORIA primary key (COD_AUDITORIA)
);



CREATE OR REPLACE TRIGGER clientesAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON CLIENTES
FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Clientes', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Clientes', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Clientes', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER moradasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON MORADAS
FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Moradas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Moradas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Moradas', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER moradasCorrespondenciaAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON MORADASCORRESPONDENCIA
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'MoradasCorrespondencia', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'MoradasCorrespondencia', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'MoradasCorrespondencia', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER moradasEntregaAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON MORADASENTREGA
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'MoradasEntrega', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'MoradasEntrega', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'MoradasEntrega', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER niveisAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON NIVEIS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Niveis', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Niveis', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Niveis', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER clientesNiveisAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON CLIENTES_NIVEIS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Clientes_Niveis', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Clientes_Niveis', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Clientes_Niveis', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER pedidosAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON PEDIDOS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Pedidos', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Pedidos', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Pedidos', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER pagamentosAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON PAGAMENTOS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Pagamentos', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Pagamentos', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Pagamentos', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER pedidosAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON PEDIDOS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Pedidos', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Pedidos', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Pedidos', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER colheitasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON COLHEITAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Colheitas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Colheitas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Colheitas', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER culturasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON CULTURAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Culturas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Culturas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Culturas', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER regasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON REGAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Regas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Regas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Regas', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER instalacoesAgricolasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON INSTALACOESAGRICOLAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'InstalacoesAgricolas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'InstalacoesAgricolas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'InstalacoesAgricolas', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER zonasGeograficasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON ZONASGEOGRAFICAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'ZonasGeograficas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'ZonasGeograficas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'ZonasGeograficas', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER setoresAgricolasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON SETORESAGRICOLAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'SetoresAgricolas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'SetoresAgricolas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'SetoresAgricolas', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER aplicacaoRegasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON APLICACAOREGAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'AplicacaoRegas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'AplicacaoRegas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'AplicacaoRegas', SYSDATE);
    END CASE;
END;


CREATE OR REPLACE TRIGGER incidentesAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON INCIDENTES
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Incidentes', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Incidentes', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Incidentes', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER produtosAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON PRODUTOS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Produtos', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Produtos', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Produtos', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER pedidosProdutosAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON PEDIDOS_PRODUTOS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Pedidos_Produtos', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Pedidos_Produtos', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Pedidos_Produtos', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER entregasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON ENTREGAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Entregas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Entregas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Entregas', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER pedidosPagamentosEntregasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON PEDIDOS_PAGAMENTOS_ENTREGAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Pedidos_Pagamentos_Entregas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Pedidos_Pagamentos_Entregas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Pedidos_Pagamentos_Entregas', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER colheitasCulturasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON COLHEITAS_CULTURAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Colheitas_Culturas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Colheitas_Culturas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Colheitas_Culturas', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER setoresAgricolasCulturasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON SETORESAGRICOLAS_CULTURAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'SetoresAgricolas_Culturas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'SetoresAgricolas_Culturas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'SetoresAgricolas_Culturas', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER planosAnuaisAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON PLANOSANUAIS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'PlanosAnuais', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'PlanosAnuais', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'PlanosAnuais', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER calendariosOperacoesAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON CALENDARIOSOPERACOES
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'CalendarioOperacoes', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'CalendarioOperacoes', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'CalendarioOperacoes', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER operacoesAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON OPERACOES
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Operacoes', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Operacoes', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Operacoes', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER planosRegaAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON PLANOSREGA
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'PlanosRega', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'PlanosRega', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'PlanosRega', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER culturasRegasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON CULTURAS_REGAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Culturas_Regas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Culturas_Regas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Culturas_Regas', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER planosAnuaisSetoresAgricolasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON PLANOSANUAIS_SETORESAGRICOLAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'PlanosAnuais_SetoresAgricolas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'PlanosAnuais_SetoresAgricolas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'PlanosAnuais_SetoresAgricolas', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER aplicacaoFatorProducaoAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON APLICACAOFATORPRODUCAO
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'AplicacaoFatorProducao', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'AplicacaoFatorProducao', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'AplicacaoFatorProducao', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER setoresAgricolasColheitasCulturasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON SETORESAGRICOLAS_COLHEITAS_CULTURAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'SetoresAgricolas_Colheitas_Culturas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'SetoresAgricolas_Colheitas_Culturas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'SetoresAgricolas_Colheitas_Culturas', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER edificiosAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON EDIFICIOS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Edificios', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Edificios', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Edificios', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER FatoresProducaoAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON FATORESPRODUCAO
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'FatoresProducao', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'FatoresProducao', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'FatoresProducao', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER restricoesAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON RESTRICOES
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Restricoes', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Restricoes', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Restricoes', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER tiposSensoresAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON TIPOSSENSORES
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'TiposSensores', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'TiposSensores', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'TiposSensores', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER estacoesMeteorologicasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON ESTACOESMETEOROLOGICAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'EstacoesMeteorologicas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'EstacoesMeteorologicas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'EstacoesMeteorologicas', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER sensoresAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON SENSORES
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Sensores', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Sensores', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Sensores', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER leiturasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON LEITURAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Leituras', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Leituras', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Leituras', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER fichasTecnicasAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON FICHASTECNICAS
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'FichasTecnicas', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'FichasTecnicas', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'FichasTecnicas', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER componentesAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON COMPONENTES
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'Componentes', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'Componentes', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'Componentes', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE TRIGGER fichasTecnicasComponentesAuditoria_trg
AFTER INSERT OR UPDATE OR DELETE ON FICHASTECNICAS_COMPONENTES
    FOR EACH ROW

BEGIN
    CASE
        WHEN INSERTING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'INSERT', 'FichasTecnicas_Componentes', SYSDATE);
        WHEN UPDATING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'UPDATE', 'FichasTecnicas_Componentes', SYSDATE);
        WHEN DELETING THEN
            INSERT INTO PISTA_AUDITORIA (USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA)
            VALUES (USER, 'DELETE', 'FichasTecnicas_Componentes', SYSDATE);
    END CASE;
END;



CREATE OR REPLACE PROCEDURE CONSULTAR_PISTA_AUDITORIA AS

CURSOR c1 IS
    SELECT USER_ID, TIPO_ALTERACAO, ALTERACAO, DATA_HORA FROM PISTA_AUDITORIA;

l_USER_ID PISTA_AUDITORIA.USER_ID%TYPE;
l_TIPO_ALTERACAO PISTA_AUDITORIA.TIPO_ALTERACAO%TYPE;
l_ALTERACAO PISTA_AUDITORIA.ALTERACAO%TYPE;
l_DATA_HORA PISTA_AUDITORIA.DATA_HORA%TYPE;


BEGIN
    OPEN c1;
    LOOP
        FETCH c1 INTO l_USER_ID, l_TIPO_ALTERACAO, l_ALTERACAO, l_DATA_HORA;
        EXIT WHEN c1%NOTFOUND;
        DBMS_OUTPUT.PUT_LINE('USER_ID: ' || l_USER_ID || ', TIPO ALTERACAO: ' || l_TIPO_ALTERACAO || ', ALTERACAO: ' || l_ALTERACAO || ', DATA_HORA: ' || l_DATA_HORA);
    END LOOP;
    CLOSE c1;
END;
